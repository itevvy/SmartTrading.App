@page "/token-test"
@using SmartTrading.App.Services.Kis

<h3>ğŸ”‘ ì‹œìŠ¤í…œ ì—°ê²° í…ŒìŠ¤íŠ¸</h3>

<div class="card-container">
    <div class="card">
        <h4>1. ì¸ì¦ í† í° ë°œê¸‰</h4>
        <p>í•œêµ­íˆ¬ìì¦ê¶Œ API ì ‘ì† ê¶Œí•œì„ ì–»ìŠµë‹ˆë‹¤.</p>
        <button class="btn btn-primary" @onclick="OnGetTokenClick" disabled="@_isLoading">
            @if (_isLoading)
            {
                <span>ğŸ”„ ì²˜ë¦¬ ì¤‘...</span>
            }
            else
            {

                <span>í† í° ë°œê¸‰ë°›ê¸°</span>
            }
        </button>
    </div>

    <div class="card">
        <h4>2. ì‹¤ì „ ë°ì´í„° í…ŒìŠ¤íŠ¸</h4>
        <p>ì‚¼ì„±ì „ì(005930) í˜„ì¬ê°€ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.</p>
        <button class="btn btn-success" @onclick="OnCheckSamsungPrice" disabled="@_isLoading">
            @if (_isLoading)
            {
                <span>ğŸ”„ ì²˜ë¦¬ ì¤‘...</span>
            }
            else
            {

                <span>ì‚¼ì„±ì „ì í˜„ì¬ê°€ ì¡°íšŒ</span>
            }
        </button>
    </div>
</div>

<hr />

@if (!string.IsNullOrEmpty(_errorMessage))
{
    <div class="alert alert-danger">
        <strong>âŒ ì˜¤ë¥˜ ë°œìƒ:</strong> @_errorMessage
    </div>
}

@if (!string.IsNullOrEmpty(_accessToken))
{
    <div class="alert alert-success">
        <strong>âœ… í† í° ë°œê¸‰ ì„±ê³µ!</strong><br />
        <code style="word-break:break-all;">@_accessToken.Substring(0, 30)...</code>
    </div>
}

@if (!string.IsNullOrEmpty(_stockPrice))
{
    <div class="alert alert-info">
        <strong>ğŸ“ˆ ì‚¼ì„±ì „ì í˜„ì¬ê°€:</strong>
        <h2 style="margin-top:10px; font-weight:bold;">@_stockPrice</h2>
    </div>
}

<style>
    .card-container {
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
    }

    .card {
        flex: 1;
        min-width: 300px;
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }

        .card h4 {
            margin-top: 0;
            color: #333;
        }

    .alert {
        padding: 15px;
        border-radius: 4px;
        margin-top: 15px;
    }

    .alert-danger {
        background-color: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
    }

    .alert-success {
        background-color: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
    }

    .alert-info {
        background-color: #cce5ff;
        color: #004085;
        border: 1px solid #b8daff;
    }

    .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        color: white;
        font-weight: bold;
    }

    .btn-primary {
        background-color: #007bff;
    }

    .btn-success {
        background-color: #28a745;
    }

    .btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
    }
</style>